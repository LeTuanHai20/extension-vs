"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const q=require("fs"),t=require("vscode"),i=require("./test/util"),S=require("path");class st{constructor(t,s){if(this.defaultLang="en",this.languages=s,this.defaultIndex=s.indexOf(this.defaultLang),this.resources=this.languages.map(s=>{const e=t+"."+s+".json";if(q.existsSync(e)){let t=q.readFileSync(e,"utf8");return JSON.parse(t)}}),-1==this.defaultIndex||!this.resources[this.defaultIndex])throw new Error("Default language not present among resource languages.")}GetString(s){let e=t.workspace.getConfiguration().get("phpTools.language")||t.env.language;return(this.resources[this.languages.indexOf(e)]||this.resources[this.defaultIndex])[s]||this.resources[this.defaultIndex][s]||""}}exports.Resource=st;class et{constructor(t,s){this.resources=new Map;let e=i.SearchRecursive(t,".en.json");for(let t=0;t<e.length;t++){let r=S.basename(e[t]).replace(/\.en\.json$/,""),i=e[t].replace(/\.en\.json$/,"");this.resources.set(r,new st(i,s))}}GetString(t,s){let e=(t=S.basename(t)).substr(0,t.indexOf("."));return this.resources.has(e)?this.resources.get(e).GetString(s):""}}exports.Resources=et;class rt{static InitGlobalResources(t,s){this.bundle=new et(t,s)}static Get(){return this.bundle}}exports.GlobalResources=rt;