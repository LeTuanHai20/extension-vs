"use strict";var e=this&&this.t||function(t,p,o,e){return new(o||(o=Promise))(function(n,s){function i(t){try{r(e.next(t))}catch(t){s(t)}}function h(t){try{r(e.throw(t))}catch(t){s(t)}}function r(t){var p;t.done?n(t.value):(p=t.value,p instanceof o?p:new o(function(t){t(p)})).then(i,h)}r((e=e.apply(t,p||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("vscode"),tt=require("./test/testExplorer"),i=require("./test/util"),pt=require("./test/PHPUnitAdapter");class ot{constructor(t,p){this.context=t,this.workspaceFolder=p;const o=new tt.TestExplorer(t),e=r.window.createOutputChannel("PHP (PHPUnit)");this.ActivateTests(),r.commands.registerCommand("phpTools.phpUnit.reload",()=>o.reload()),r.commands.registerCommand("phpTools.phpUnit.reload-collection",t=>o.reload(t)),r.commands.registerCommand("phpTools.phpUnit.reloading",()=>{}),r.commands.registerCommand("phpTools.phpUnit.run-all",()=>o.run()),r.commands.registerCommand("phpTools.phpUnit.run",(...t)=>o.run(t)),r.commands.registerCommand("phpTools.phpUnit.cancel",()=>o.cancel()),r.commands.registerCommand("phpTools.phpUnit.debug",(...t)=>o.debug(t)),r.commands.registerCommand("phpTools.phpUnit.selected",t=>o.selected(t)),r.commands.registerCommand("phpTools.phpUnit.show-source",t=>o.showSource(t)),r.commands.registerCommand("phpTools.phpUnit.enable-autorun",t=>o.setAutorun(t)),r.commands.registerCommand("phpTools.phpUnit.disable-autorun",t=>o.clearAutorun(t)),r.commands.registerCommand("phpTools.phpUnit.retire",t=>o.retireState(t)),r.commands.registerCommand("phpTools.phpUnit.reset",t=>o.resetState(t)),t.subscriptions.push(r.window.registerTreeDataProvider("phpTools.phpUnit",o)),o.registerAdapter(new pt.PHPUnitAdapter(p,e,t))}ActivateTests(){return e(this,void 0,void 0,function*(){let t=yield i.TestsPresent();r.commands.executeCommand("setContext","phpTestPresent",t)})}}exports.UnitTests=ot;