"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const r=require("vscode"),os=require("./state");class gs{constructor(t,s,i,e){this.collection=t,this.info=s,this.parent=i,this.kt="",this.Tt=[],this.neededUpdates="none",this.children=[];const h=e?e.get(s.id):void 0;if(h&&"test"===h.info.type){let t=h.state.current;s.skipped?t="skipped":"skipped"===t&&(t="pending"),this.At={current:t,previous:h.state.previous,autorun:h.state.autorun},this.kt=h.log||""}else this.At=os.defaultState(s.skipped),this.kt=""}get state(){return this.At}get log(){return this.kt}get decorations(){return this.Tt}setCurrentState(t,s,i){this.state.current=t,"passed"!==t&&"failed"!==t||(this.state.previous=t),"scheduled"===t&&(this.kt="",this.Tt=[]),s&&(this.kt+=s+"\n"),i&&(this.Tt=this.Tt.concat(i)),this.neededUpdates="send",this.parent&&(this.parent.neededUpdates="recalc"),this.collection.sendNodeChangedEvents(),this.info.file&&this.collection.explorer.decorator.updateDecorationsFor(this.info.file)}retireState(){"passed"!==this.state.current&&"failed"!==this.state.current||(this.At.current="pending",this.neededUpdates="send",this.info.file&&this.collection.explorer.decorator.updateDecorationsFor(this.info.file))}resetState(){("pending"!==this.state.current&&"skipped"!==this.state.current||"pending"!==this.state.previous&&"skipped"!==this.state.previous)&&(this.At.current="pending",this.At.previous="pending",this.neededUpdates="send",this.info.file&&this.collection.explorer.decorator.updateDecorationsFor(this.info.file))}setAutorun(t){this.At.autorun=t,this.neededUpdates="send"}getTreeItem(){this.neededUpdates="none";const t=new r.TreeItem(this.info.label,r.TreeItemCollapsibleState.None);return t.iconPath=this.collection.explorer.iconPaths[os.stateIcon(this.state)],t.contextValue="test",t.command={title:"",command:"phpTools.phpUnit.selected",arguments:[this]},t}}exports.TestNode=gs;