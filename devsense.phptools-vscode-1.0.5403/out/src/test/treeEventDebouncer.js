"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class as{constructor(t,s){this.collections=t,this.treeDataChanged=s}sendNodeChangedEvents(t){t?(this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.sendNodeChangedEventsNow()):this.timeout||(this.timeout=setTimeout(()=>{this.timeout=void 0,this.sendNodeChangedEventsNow()},200))}sendTreeChangedEvent(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.treeDataChanged.fire()}sendNodeChangedEventsNow(){const t=[];for(const s of this.collections)s.suite&&(s.recalcState(),t.push(...this.collectChangedNodes(s.suite)));for(const s of t)void 0===s.parent?this.treeDataChanged.fire():this.treeDataChanged.fire(s)}collectChangedNodes(t){if("send"===t.neededUpdates)return this.resetNeededUpdates(t),[t];{const s=[];for(const e of t.children)s.push(...this.collectChangedNodes(e));return s}}resetNeededUpdates(t){t.neededUpdates="none";for(const s of t.children)this.resetNeededUpdates(s)}}exports.TreeEventDebouncer=as;