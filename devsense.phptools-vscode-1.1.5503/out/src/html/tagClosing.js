"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("vscode");function el(e,l,i){let n=[];t.workspace.onDidChangeTextDocument(l=>(function(l,i){if(!r)return;let n=t.window.activeTextEditor&&t.window.activeTextEditor.document;if(l!==n||0===i.length)return;void 0!==u&&clearTimeout(u);let o=i[i.length-1],f=o.text[o.text.length-1];if(o.rangeLength>0||">"!==f&&"/"!==f)return;let c=o.range.start,s=l.version;u=setTimeout(()=>{let i=new t.Position(c.line,c.character+o.text.length);e(l,i).then(e=>{if(e&&r){let n=t.window.activeTextEditor;if(n){let r=n.document;if(l===r&&r.version===s){let l=n.selections;l.length&&l.some(e=>e.active.isEqual(i))?n.insertSnippet(new t.SnippetString(e),l.map(e=>e.active)):n.insertSnippet(new t.SnippetString(e),i)}}}}),u=void 0},100)})(l.document,l.contentChanges),null,n);let r=!1;o(),t.window.onDidChangeActiveTextEditor(o,null,n);let u=void 0;function o(){r=!1;let e=t.window.activeTextEditor;if(!e)return;let n=e.document;l[n.languageId]&&t.workspace.getConfiguration(void 0,n.uri).get(i)&&(r=!0)}return t.Disposable.from(...n)}exports.g=el;